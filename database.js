const db = firebase.firestore(); function addLink() { const url = document.getElementById('new-link').value; const userId = auth.currentUser.uid; db.collection('links').doc(userId).set({ links: firebase.firestore.FieldValue.arrayUnion({ url: url, addedAt: new Date() }) }, { merge: true }); loadLinks(); } function loadLinks() { const userId = auth.currentUser.uid; db.collection('links').doc(userId).get() .then(doc => { const links = doc.exists ? doc.data().links : []; // Popola la tabella HTML }); }
