function exportData() { const userId = auth.currentUser.uid; db.collection('links').doc(userId).get() .then(doc => { const data = doc.data(); const blob = new Blob([JSON.stringify(data)], {type: 'application/json'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = `linklocker-backup-${new Date().toISOString().split('T')[0]}.json`; document.body.appendChild(a); a.click(); document.body.removeChild(a); }); } function importData() { const file = document.getElementById('import-file').files[0]; const reader = new FileReader(); reader.onload = function(e) { const data = JSON.parse(e.target.result); const userId = auth.currentUser.uid; db.collection('links').doc(userId).set(data, { merge: true }) .then(() => location.reload()); }; reader.readAsText(file); }
